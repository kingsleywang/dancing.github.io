<!DOCTYPE html><html><head> <meta charset="utf-8"> <title></title> <style></style> <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script src="./pinyin4js.js"></script> <style type="text/css"> .warpper{margin-top: 20px;}</style></head><body> <div class="row"> <div class="col-xs-0 col-md-4"></div><div class="col-xs-12 col-md-4"> <form> <div class="form-group warpper"> <input type="text" class="form-control" id="js-input" placeholder="写点什么"> </div></form> </div><div class="col-xs-0 col-md-4"></div></div><div class="row"> <div class="col-xs-0 col-md-4"></div><div class="col-xs-12 col-md-4"> <div id="js-images" class="warpper"></div></div><div class="col-xs-0 col-md-4"></div></div></body><script>(function(){$(document).ready(function(){$('#js-images').empty();}); $("#js-input").blur(function(){$('#js-images').empty(); const pyStr=PinyinHelper.convertToPinyinString($("#js-input").val(), ' ', PinyinFormat.WITHOUT_TONE); const words=pyStr .split(' '); $.each(words, function(idx, word){const chars=word.split(''); $.each(chars, function(idx, char){if(!isLetter(char)){removeLastImage(); printWhatever(char);}else{var file; if(char===char.toUpperCase()){file=char+"1";}else{file=char;}printImage(file);}}); printWhatever("");});}); function isLetter(str){return str.length===1 && str.match(/[a-zA-Z]/i);}function printWhatever(char){var cvs=document.createElement('canvas'); var tCtx=cvs.getContext('2d'); tCtx.canvas.width=32; tCtx.canvas.height=36; tCtx.fillText(char, 10, 20); appendImage(tCtx.canvas.toDataURL());}function printImage(file){appendImage("./1/"+file+".jpg");}function appendImage(url){var img=$("<img class='dynamicImage'>"); img.attr('src', url); img.appendTo('#js-images');}function removeLastImage(){console.log($(".dynamicImage").last()); $(".dynamicImage").last().remove();}})(jQuery);</script></html>